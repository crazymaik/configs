#!/bin/bash

# Enable bash completion for alias
# mkalias <completion function> <alias> <command with args>
# e.g.
#     mkalias _git gbd git branch -d
function mkalias () {
	local function_name="$1"
	local alias_name="$2"
	local arg_count=$(($#-3))
	shift 2
	eval "
		function _$alias_name {
			COMP_CWORD+=$arg_count
			COMP_WORDS=( "$@" \${COMP_WORDS[@]:1} )
			$function_name
		}"

	complete -o bashdefault -o default -o nospace -F _$alias_name $alias_name
	alias $alias_name="$*"
}

